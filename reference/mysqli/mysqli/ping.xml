<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 9b1673cf114a1e10c4563ab9223cb56aed552b89 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes -->
<refentry xml:id="mysqli.ping" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>mysqli::ping</refname>
  <refname>mysqli_ping</refname>
  <refpurpose>Ping la connexion au serveur et reconnecte si elle n'existe plus</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
  &warn.deprecated.function-8-4-0;
 </refsynopsisdiv>

 <refsect1 role="description">
  &reftitle.description;
  <para>&style.oop;</para>
  <methodsynopsis role="mysqli">
   <modifier role="attribute">#[\Deprecated]</modifier>
   <modifier>public</modifier> <type>bool</type><methodname>mysqli::ping</methodname>
   <void/>
  </methodsynopsis>
  <para>&style.procedural;</para>
  <methodsynopsis>
   <modifier role="attribute">#[\Deprecated]</modifier>
   <type>bool</type><methodname>mysqli_ping</methodname>
   <methodparam><type>mysqli</type><parameter>mysql</parameter></methodparam>
  </methodsynopsis>
  <para>
   Vérifie si la connexion au serveur fonctionne correctement. Si elle a été
   refermée et que l'option globale
   <link linkend="ini.mysqli.reconnect">mysqli.reconnect</link> est activée,
   une reconnexion automatique est tentée.
  </para>
  <note>
   <simpara>
    Le paramètre &php.ini; mysqli.reconnect est ignoré par le pilote mysqlnd, donc
    les reconnexions automatique ne sont jamais tentées.
   </simpara>
  </note>
  <para>
   Cette fonction peut être utilisée pour que les clients qui restent
   longtemps ouverts sans action puissent vérifier que la connexion n'a pas
   été refermée par le serveur, et, le cas échéant, faire une reconnexion
   automatique.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    &mysqli.link.description;
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &return.success;
  </para>
 </refsect1>

 <refsect1 role="errors">
  &reftitle.errors;
  &mysqli.conditionalexception;
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <informaltable>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>&Version;</entry>
      <entry>&Description;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>8.4.0</entry>
      <entry>
       Les méthodes <methodname>mysqli::ping</methodname> et
       <function>mysqli_ping</function> sont désormais obsolètes.
       La fonctionnalité <literal>reconnect</literal> n'est plus
       disponible à partir de PHP 8.2.0, rendant cette fonction obsolète.
      </entry>
     </row>
    </tbody>
   </tgroup>
  </informaltable>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <example>
   <title>Exemple avec <methodname>mysqli::ping</methodname></title>
   <para>&style.oop;</para>
   <programlisting role="php">
<![CDATA[
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* Vérification de la connexion */
if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

/* Vérification si la connexion est toujours active */
if ($mysqli->ping()) {
    printf ("La connexion est Ok !\n");
} else {
    printf ("Erreur : %s\n", $mysqli->error);
}

/* Fermeture de la connexion */
$mysqli->close();
?>
]]>
   </programlisting>
   <para>&style.procedural;</para>
   <programlisting role="php">
<![CDATA[
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* Vérification de la connexion */
if (mysqli_connect_errno()) {
    printf("Échec de la connexion : %s\n", mysqli_connect_error());
    exit();
}

/* Vérification si la connexion est toujours active */
if (mysqli_ping($link)) {
    printf ("La connexion est Ok !\n");
} else {
    printf ("Erreur : %s\n", mysqli_error($link));
}

/* Fermeture de la connexion */
mysqli_close($link);
?>
]]>
   </programlisting>
   &examples.outputs;
   <screen>
<![CDATA[
La connexion est valide !
]]>
   </screen>
  </example>
 </refsect1>

</refentry>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
