<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 2454c1fb0e8bef7d7f413e67fbeb25d824f710f0 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->

<refentry xml:id="function.snmp2-set" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>snmp2_set</refname>
  <refpurpose>Définit la valeur d'un objet <acronym>SNMP</acronym></refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>snmp2_set</methodname>
   <methodparam><type>string</type><parameter>host</parameter></methodparam>
   <methodparam><type>string</type><parameter>community</parameter></methodparam>
   <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
   <methodparam><type>string</type><parameter>type</parameter></methodparam>
   <methodparam><type>string</type><parameter>value</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>timeout</parameter><initializer>1000000</initializer></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>retries</parameter><initializer>5</initializer></methodparam>
  </methodsynopsis>
  <para>
   La fonction <function>snmp2_set</function> est utilisée pour
   définir la valeur d'un objet <acronym>SNMP</acronym>
   spécifié par son identifiant <parameter>object_id</parameter>.
  </para>
  
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <variablelist>
   <varlistentry>
    <term><parameter>host</parameter></term>
    <listitem>
     <para>
      Le nom d'hôte de l'agent <acronym>SNMP</acronym> (serveur).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>community</parameter></term>
    <listitem>
     <para>
      La communauté d'écriture.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>object_id</parameter></term>
    <listitem>
     <para>
      L'identifiant de l'objet <acronym>SNMP</acronym>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>type</parameter></term>
    <listitem>
     <para>
      Le <acronym>MIB</acronym> définit le type de chaque identifiant
      de l'objet. Il doit être spécifié sous la forme d'un seul
      caractère depuis la liste suivante.
     </para>
     <table>
      <title>types</title>
      <tgroup cols="2">
       <tbody>
        <row><entry>=</entry><entry>Le type est fourni depuis le MIB</entry></row>
        <row><entry>i</entry><entry>INTEGER</entry> </row>
        <row><entry>u</entry><entry>INTEGER</entry></row>
        <row><entry>s</entry><entry>STRING</entry></row>
        <row><entry>x</entry><entry>HEX STRING</entry></row>
        <row><entry>d</entry><entry>DECIMAL STRING</entry></row>
        <row><entry>n</entry><entry>NULLOBJ</entry></row>
        <row><entry>o</entry><entry>OBJID</entry></row>
        <row><entry>t</entry><entry>TIMETICKS</entry></row>
        <row><entry>a</entry><entry>IPADDRESS</entry></row>
        <row><entry>b</entry><entry>BITS</entry></row>
       </tbody>
      </tgroup>
     </table>
     <para>
      Si OPAQUE_SPECIAL_TYPES a été défini lors de la compilation
      de la bibliothèque SNMP, les valeurs suivantes sont également
      disponibles :
     </para>
     <table>
      <title>types</title>
      <tgroup cols="2">
       <tbody>
        <row><entry>U</entry><entry>int64 non signé</entry></row>
        <row><entry>I</entry><entry>int64 signé</entry></row>
        <row><entry>F</entry><entry>float</entry></row>
        <row><entry>D</entry><entry>double</entry></row>
       </tbody>
      </tgroup>
     </table>
     <para>
      La plupart de ces valeurs utilise le type ASN.1 correspondant.
      's', 'x', 'd' et 'b' sont tous des façons différentes de spécifier
      une valeur OCTET STRING, et le type 'u' non signé est également
      utilisé pour gérer les valeurs Gauge32.
     </para>
     <para>
      Si les fichiers MIBs sont chargés dans l'arbre MIB avec
      "snmp_read_mib" ou en les spécifiant dans la configuration
      libsnmp, '=' peut être utilisé en tant que paramètre
      <parameter>type</parameter> pour tous les identifiants d'objets
      qui pourront être automatiquement lus depuis le MIB.
     </para>
     <para>
      Notez qu'il y a 2 façons de définir une variable de type
      BITS comme, i.e. "SYNTAX    BITS {telnet(0), ftp(1), http(2), icmp(3), snmp(4), ssh(5), https(6)}"
     </para>
     <itemizedlist>
      <listitem>
       <para>
        Utilisation du type "b" et une liste d'octets, comme :
        <programlisting role="php">snmpset('FOO-MIB::bar.42', 'b', '0 1 2 3 4');</programlisting>
        avec l'inconvénient que le succès de l'opération ne sera pas facilement
        vérifiable avec snmpget() pour les OID identiques i.e. 0xF8.
       </para>
      </listitem>
      <listitem>
       <para>
        Utilisation du type "x" et un nombre héxadécimal
        mais sans (!) le préfixe habituel "0x" : <programlisting role="php">snmpset('FOO-MIB::bar.42', 'x', 'F0');</programlisting>
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>value</parameter></term>
    <listitem>
     <para>
      La nouvelle valeur.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>timeout</parameter></term>
    <listitem>
     <para>
      Le nombre de microsecondes avant le premier délai d'expiration.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>retries</parameter></term>
    <listitem>
     <para>
      Le nombre de tentatives dans le cas où le délai d'expiration survient.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &return.success;
  </para>
  <para>
   Si l'hôte SNMP rejète le type de données, une alerte de type
   E_WARNING sera émis, comme "Warning: Error in packet. Reason: (badValue) The value given has the wrong type or length.".
   Si un OID inconnu ou invalide est spécifié, l'alerte émise contiendra
   probablement ceci : "Could not add variable".
  </para>
 </refsect1>
 
 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Exemple avec <function>snmp2_set</function></title>
    <programlisting role="php">
<![CDATA[
<?php
  snmp2_set("localhost", "public", "IF-MIB::ifAlias.3", "s", "foo");
?>
 ]]>
    </programlisting>
   </example>
  </para>
 </refsect1>
 
 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>snmp2_get</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
