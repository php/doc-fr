<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 46312574d5cf543db03c8fc166174ca6e83c9952 Maintainer: jpauli Status: ready -->
<!-- Reviewed: yes -->

<refentry xmlns="http://docbook.org/ns/docbook" xml:id="function.htmlentities">
 <refnamediv>
  <refname>htmlentities</refname>
  <refpurpose>Convertit tous les caractères éligibles en entités HTML</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>string</type><methodname>htmlentities</methodname>
   <methodparam><type>string</type><parameter>string</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>flags</parameter><initializer>ENT_COMPAT</initializer></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>charset</parameter></methodparam>
   <methodparam choice="opt"><type>bool</type><parameter>double_encode</parameter><initializer>true</initializer></methodparam>
  </methodsynopsis>
  <para>
   <function>htmlentities</function> est identique à la fonction
   <function>htmlspecialchars</function>, sauf que tous les caractères
   qui ont des équivalents en entités HTML sont effectivement
   traduits.
  </para>
  <para>
   Si vous voulez réaliser l'opération inverse, vous devez utiliser 
   la fonction <function>html_entity_decode</function>.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>string</parameter></term>
     <listitem>
      <para>
       La chaîne d'entrée.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>flags</parameter></term>
     <listitem>
      <para>
       Comme <function>htmlspecialchars</function>, cette
       fonction prend un deuxième argument optionnel
       <parameter>flags</parameter>, qui indique
       comment doivent être traités les guillemets doubles et simples.
       Il prend une des 3 constantes suivantes, la valeur par
       défaut étant <constant>ENT_COMPAT</constant>, optionnellement
       combinée avec une quatrième <constant>ENT_IGNORE</constant> (depuis
       PHP 5.3.0) :
       <table>
        <title>Constantes disponibles pour <parameter>flags</parameter></title>
        <tgroup cols="2">
         <thead>
          <row>
           <entry>Constante</entry>
           <entry>Description</entry>
          </row>
         </thead>
         <tbody>
          <row>
           <entry><constant>ENT_COMPAT</constant></entry>
           <entry>Convertit les guillemets doubles, et ignore les guillemets simples.</entry>
          </row>
          <row>
           <entry><constant>ENT_QUOTES</constant></entry>
           <entry>Convertit les guillemets doubles et les guillemets simples.</entry>
          </row>
          <row>
           <entry><constant>ENT_NOQUOTES</constant></entry>
           <entry>Ignore les guillemets doubles et les guillemets simples.</entry>
          </row>
          <row>
           <entry><constant>ENT_IGNORE</constant></entry>
           <entry>
            Ignore les séquences de caractères invalides plutôt que de retourner une
            chaine vide. Ajouté en PHP 5.3.0. Introduit pour des raisons de compatibilité,
            évitez de l'utiliser pour des raisons de sécurité.
           </entry>
          </row>
         </tbody>
        </tgroup>
       </table>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>charset</parameter></term>
     <listitem>
      <para>
       Comme <function>htmlspecialchars</function>, cette fonction prend un
       troisième argument optionnel <parameter>charset</parameter> qui définit
       le jeu de caractères utilisé durant la conversion. Actuellement, le jeu
       de caractères ISO-8859-1 est utilisé par défaut.
       Cependant, ce comportement par défaut est appelé à changer dans les
       futures versions de PHP ; le développeur est vivement encouragé
       à spécifier une valeur.
      </para>
      &reference.strings.charsets;
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>double_encode</parameter></term>
     <listitem>
      <para>
       Lorsque <parameter>double_encode</parameter> est désactivé, PHP n'encodera pas
       les entités html existantes. Par défaut, tout est converti.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Retourne la chaîne encodée.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>5.3.0</entry>
       <entry>
        La constante <constant>ENT_IGNORE</constant> a été ajoutée.
       </entry>
      </row>
      <row>
       <entry>5.2.3</entry>
       <entry>
        Ajout du paramètre <parameter>double_encode</parameter>.
       </entry>
      </row>
      <row>
       <entry>4.1.0</entry>
       <entry>
        Ajout du paramètre <parameter>charset</parameter>.
       </entry>
      </row>
      <row>
       <entry>4.0.3</entry>
       <entry>
        Ajout du paramètre <parameter>flags</parameter>.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Exemple avec <function>htmlentities</function></title>
    <programlisting role="php">
<![CDATA[
<?php
$str = 'Un \'apostrophe\' en <strong>gras</strong>';

// Affiche : Un 'apostrophe' en &lt;strong&gt;gras&lt;/strong&gt;
echo htmlentities($str);

// Affiche : Un &#039;apostrophe&#039; en &lt;strong&gt;gras&lt;/strong&gt;
echo htmlentities($str, ENT_QUOTES);
?>
]]>
    </programlisting>
   </example>
  </para>
  
  <para>
   <example>
    <title>Utilisation de <constant>ENT_IGNORE</constant></title>
    <programlisting role="php">
<![CDATA[
<?php
$str = "\x8F!!!";

// Affiche une chaine vide
echo htmlentities($str, ENT_QUOTES, "UTF-8");

// Affiche "!!!"
echo htmlentities($str, ENT_QUOTES | ENT_IGNORE, "UTF-8");
?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>html_entity_decode</function></member>
    <member><function>get_html_translation_table</function></member>
    <member><function>htmlspecialchars</function></member>
    <member><function>nl2br</function></member>
    <member><function>urlencode</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->