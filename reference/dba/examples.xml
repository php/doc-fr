<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: b5fce74a6c0760daccc79063279e102873be6d77 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes Maintainer: yannick -->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="dba.examples">
 &reftitle.examples;
 <section xml:id="dba.example">
  <title>Utilisation</title>
   <example>
    <title>Exemple avec DBA</title>
    <programlisting role="php">
<![CDATA[
<?php

$id = dba_open("/tmp/test.db", "n", "db2");

if (!$id) {
    echo "dba_open a échoué\n";
    exit;
}

dba_replace("key", "Ceci est un exemple !", $id);

if (dba_exists("key", $id)) {
    echo dba_fetch("key", $id);
    dba_delete("key", $id);
}

dba_close($id);
?>
]]>
   </programlisting>
  </example>
  <simpara>
   DBA gère les données binaires et n'a aucune limite arbitraire.
   Cependant, il hérite de toutes les limites définies par
   l'implémentation de la base de données accédée.
  </simpara>
  <simpara>
   Toutes les bases de données se basant sur des fichiers doivent
   fournir une façon de définir le mode de fichier des nouvelles
   bases créées. Ce mode est passé généralement comme 4ème argument
   des fonctions <function>dba_open</function> ou
   <function>dba_popen</function>.
  </simpara>
  <simpara>
   Il est possible d'accéder à toutes les entrées de la base de données de
   façon linéaire, en utilisant les fonctions <function>dba_firstkey</function>
   et <function>dba_nextkey</function>. Il n'est pas possible de modifier la
   base de données lorsque l'on est en train de la lire.
  </simpara>
  <example>
   <title>Lecture d'une base de données</title>
   <programlisting role="php">
<![CDATA[
<?php

// ...ouverture de la base de données...

$key = dba_firstkey($id);

while ($key !== false) {
    if (true) {          // on retient la clé pour effectuer d'autres actions plus tard
        $handle_later[] = $key;
    }
    $key = dba_nextkey($id);
}

foreach ($handle_later as $val) {
    dba_delete($val, $id);
}

?>
]]>
   </programlisting>
  </example>
 </section>
</chapter>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
