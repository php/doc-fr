<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: ffc053f6055f5ccc57e44a063c295a8d3063d7d8 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->

<refentry xml:id="mongo.getHosts" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>Mongo::getHosts</refname>
  <refpurpose>Met à jour les statuts de tous les hôtes associés à celui-ci</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <modifier>public</modifier> <type>array</type><methodname>Mongo::getHosts</methodname>
   <void/>
  </methodsynopsis>

  <para>
   Cette méthode ne peut être utilisée qu'avec une connexion à un
   jeu de réplication. Elle retourne le statut de tous les hôtes du jeu,
   et met à jour les informations de connexion (la mise à jour est invisible
   pour l'utilisateur).
  </para>

  <para>
   Cette méthode sera appelée automatiquement par le driver toutes les 5 secondes.
  </para>

  <para>
   Reportez-vous à la <link linkend="mongo.queries">section sur les requêtes</link>
   de ce manuel pour plus d'informations sur la distribution de lecture aux esclaves.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  &no.function.parameters;
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Retourne un tableau d'informations sur les hôtes du jeu, incluant chaque
   nom d'hôtes, identifiant du jeu, la santé (1 signifie que l'hôte est en bonne santé),
   le temps de disponibilité, et si l'hôte est à jour par rapport à l'hôte primaire.
   Par exemple, pour un jeu de réplication contenant 3 membres s'exécutant en local,
   ces informations ressembleront à ceci :
  </para>
  <screen>
<![CDATA[
Array
(
    [ubuntu:27017] => Array
        (
            [_id] => 0
            [name] => ubuntu:27017
            [health] => 1
            [state] => 1
            [stateStr] => PRIMARY
            [optime] => MongoTimestamp Object
                (
                    [sec] => 1
                    [inc] => 1291155754
                )

            [optimeDate] => MongoDate Object
                (
                    [sec] => 1291155754
                    [usec] => 0
                )

            [self] => 1
        )

    [ubuntu:27019] => Array
        (
            [_id] => 2
            [name] => ubuntu:27019
            [health] => 1
            [state] => 2
            [stateStr] => SECONDARY
            [uptime] => 91928
            [optime] => MongoTimestamp Object
                (
                    [sec] => 1
                    [inc] => 1291155754
                )

            [optimeDate] => MongoDate Object
                (
                    [sec] => 1291155754
                    [usec] => 0
                )

            [lastHeartbeat] => MongoDate Object
                (
                    [sec] => 1291158846
                    [usec] => 0
                )

        )

    [ubuntu:27018] => Array
        (
            [_id] => 1
            [name] => ubuntu:27018
            [health] => 1
            [state] => 2
            [stateStr] => SECONDARY
            [uptime] => 91944
            [optime] => MongoTimestamp Object
                (
                    [sec] => 1
                    [inc] => 1291155754
                )

            [optimeDate] => MongoDate Object
                (
                    [sec] => 1291155754
                    [usec] => 0
                )

            [lastHeartbeat] => MongoDate Object
                (
                    [sec] => 1291158846
                    [usec] => 0
                )

        )

)
]]>
  </screen>
  <para>
   Cette méthode retourne &null; s'il n'y a pas de connexion à un jeu
   de réplication ou si la connexion n'a pas encore été initialisée.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
--> 
