<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 95613c06978f494ad0356f4c8b0944fe352fad15 Maintainer: jpauli Status: ready -->
<!-- Reviewed: no -->

<chapter xml:id="mongo.testing" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Lancer les tests du pilote</title>

 <para>
  Le paquet PECL n'est pas inclus dans les tests, mais sont disponibles sur
  <link xlink:href="&url.mongodb.github;">Github</link>. Il y a
  2 types de tests : les tests .phpt et les tests PHPUnit. Les tests
  PHPUnit seront remplacés par les tests .phpt.
 </para>

 <section>
  <title>Les tests .phpt</title>
  <para>
   Les tests .phpt sont la façon standard de tester des extensions PHP.
   Après compilation du driver MongoDG avec la commande "make", vous pouvez
   ensuite utiliser la commande "make test" pour exécuter les tests. Ces tests
   nécessitent le bon fonctionnement de MongoDB et donc, vous devez configurer
   la suite de test en tant que tel. Vous pouvez faire cette configuration en
   éditant le fichier <literal>tests/mongo-test-cfg.inc</literal>.
  </para>
  <para>
   Reportez-vous à 
   <link xlink:href="https://github.com/mongodb/mongo-php-driver/blob/master/CONTRIBUTING.md#running-the-tests">GitHub</link>
   pour plus d'informations à propos de ces tests.
   
   .
  </para>
 </section>

 <section>
  <title>Tests PHPUnit</title>
  <para>
   Pour exécuter les tests, vous devez télécharger le driver depuis
   Github (les tests sont dans le dossier <literal>tests/</literal>).
   Vous aurez également besoin de
   <link xlink:href="&url.phpunit.install;">PHPUnit</link> pour les exécuter.
   PHPUnit peut être installé via PEAR (regardez également les instructions
   d'installation, il nécessite quelques pré-requis).
  </para>
  <para>
   Quelques tests attendent des alertes ou des erreurs, aussi, vous
   devez définir <literal>error_reporting</literal> dans votre
   <literal>php.ini</literal> à <literal>E_STRICT | E_ALL</literal>
   afin qu'ils puissent être réalisés. Si vous ne le faites pas, vous
   obtiendrez des erreurs qui indiquent que le test attendait une alerte ou
   une erreur.
  </para>
  <para>
   Pour exécuter ces tests, assurez-vous qu'il y a un serveur MongoDB
   fonctionnant localement sur le port 27017. Avant de rapporter des erreurs,
   essayez d'exécuter ces tests sur la dernière version de développement
   de MongoDB : en effet, il y a des tests sur des fonctionnalités qui ne
   sont pas encore sur la version stable.
  </para>
  <para>
   La suite de tests utilise la base de données "phpunit". Si vous utilisez
   une base de données portant un tel nom dans votre application, assurez-vous
   de pointer MongoDB sur un dossier de données différent avant d'exécuter les
   tests.
  </para>
  <para>
   Assurez-vous d'être dans le dossier principal des sources du driver
   téléchargé depuis Github. Puis, exécutez :
  </para>
  <programlisting>
<![CDATA[

$ phpunit tests/MongoSuite.php

]]>
 </programlisting>
 </section>

 <section>
  <title>Rapport des erreurs</title>
  <para>
   Veuillez rapporter tous les échecs ou les erreurs dans
   <link xlink:href="&url.mongodb.jira;">l'outil de suivi des bogues</link>.
   Il se peut que des tests ne soient pas exécutés, c'est normal et vous
   pouvez les ignorer.
  </para>
  <para>
   Les nouveaux tests sont toujours les bienvenus ! Vous pouvez contribuer
   en proposant des nouveaux tests sur toutes les fonctionnalités.
  </para>
 </section>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->