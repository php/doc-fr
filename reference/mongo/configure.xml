<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 20d54ddc26f3709b83b21f7b41df785e2e0c3709 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->

<section xml:id="mongo.installation" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.install;
 <para>
  Le driver MongoDB devrait fonctionne sur la plupart des systèmes : Windows, Mac OS X, 
  Unix, et Linux ; des petites machines au gros serveurs ; sur des systèmes
  32 et 64 bit ; avec PHP 5.1, 5.2, et 5.3.
 </para>
 <para>
  &pecl.moved;
  Cette page fournit des informations spécifiques sur l'installation de l'extension sur
  différents systèmes mais aussi sur les problèmes communs rencontrés par les utilisateurs.
 </para>
 
 <itemizedlist>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.nix">Installation sous *NIX</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.manual">Installation manuelle</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.osx">OS X</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.gentoo">Gentoo</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.fedora">Fedora</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.windows">Installation sous Windows</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.thirdparty">Instructions d'installation tierces</link>
   </para>
  </listitem>
 </itemizedlist>
 
 <section xml:id="mongo.installation.nix">
  <title>Installation sur les systèmes *NIX</title>
  
  <para>
   Lancez:
   <programlisting>
<![CDATA[

$ sudo pecl install mongo

]]>
   </programlisting>
  </para>
  
  <para>
   Si vous utilisez CentOS ou Redhat, vous pouvez effectuer
   l'installation via des
   <link xlink:href="&url.mongodb.rpm;">RPMs</link>.
  </para>
  
  <para>
   Ajoutez les lignes suivantes à votre fichier php.ini:
   <programlisting>
<![CDATA[

extension=mongo.so

]]>
   </programlisting>
  </para>
  
  <para>
   Si pecl échoue en raison d'un manque de mémoire vive lors de l'installation,
   assurez-vous que l'option <emphasis>memory_limit</emphasis> de votre php.ini est définie à au
   moins 32M.
  </para>
 </section>
 
 <section xml:id="mongo.installation.manual">
  <title>Installation manuelle</title>
  
  <para>
   Pour les développeurs des pilotes ou les personnes intéréssées par les derniers correctifs
   de bugs, vous pouvez compiler le pilote depuis
   <link xlink:href="&url.mongodb.github;">Github</link>.
   Allez sur Github et cliquez sur "download". Lancez ensuite :   
   <programlisting>
<![CDATA[

$ tar zxvf mongodb-mongodb-php-driver-<commit_id>.tar.gz
$ cd mongodb-mongodb-php-driver-<commit_id>
$ phpize
$ ./configure
$ sudo make install

]]>
   </programlisting>
  </para>  
  <para>
   Effectuez ces changements à votre fichier php.ini:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Assurez-vous que la variable <emphasis>extension_dir</emphasis>
     pointe vers le bibliothèque <emphasis>mongo.so</emphasis>.
     La compilation devrait afficher l'endroit où PHP installe le driver ;
     l'affichage devrait ressembler à quelque chose comme :
     <programlisting>
<![CDATA[

      Installing '/usr/lib/php/extensions/no-debug-zts-20060613/mongo.so'

]]>
     </programlisting>
     
     Vérifiez bien qu'il s'agisse du même dossier d'extensions que celui de votre PHP en lançant:
     
     <programlisting>
<![CDATA[

      $ php -i | grep extension_dir
        extension_dir => /usr/lib/php/extensions/no-debug-zts-20060613 =>
      /usr/lib/php/extensions/no-debug-zts-20060613  

]]>
     </programlisting>
     
     Si ce n'est pas le cas, changez <emphasis>extension_dir</emphasis>
     de php.ini ou placez manuellement <emphasis>mongo.so</emphasis>.
    </para>
   </listitem>
   <listitem>
    <para>
     Pour chargez l'extension au démarrage de PHP, ajoutez cette ligne :
     
     <programlisting>
<![CDATA[

      extension=mongo.so

]]>
     </programlisting>
     
    </para>
   </listitem>
  </itemizedlist>
  
  <section xml:id="mongo.installation.osx">
   <title>Systèmes OS X</title>
   
   <para>
    Si votre système ne peut trouver autoconf, vous devrez installer Xcode 
    (disponible sur le DVD d'installation de votre OS ou en libre téléchargement
    depuis le site web d'Apple). 
   </para>
   
   <para>
    Si vous utilisez XAMPP, vous devriez pouvoir compiler le driver avec la commande
    suivante :
    <programlisting>
<![CDATA[

sudo /Applications/XAMPP/xamppfiles/bin/pecl install mongo

]]>
    </programlisting>
   </para>
   
   <para>
    Si vous utilisez MAMP (ou XAMPP et que la commande ci-dessus ne fonctionne pas),    
    des binaires précompilés sont disponibles sur
    <link xlink:href="&url.mongodb.github.downloads;">Github</link>
    (téléchargez le dernier qui a pour nom "osx" et la version de PHP que vous utilisez).
    Extraire mongo.so depuis l'archive et ajoutez-le dans le dossier de l'extension
    MAMP ou XAMPP. Ajoutez
    <programlisting>
<![CDATA[

      extension=mongo.so

]]>
    </programlisting>
    au fichier php.ini utilisé puis redémarrez le serveur web.
   </para>
  </section>
  
  <section xml:id="mongo.installation.gentoo">
   <title>Gentoo</title>
   <para>
    Gentoo a un paquet pour le driver PHP nommé dev-php5/mongo,
    qui peut installer via la commande suivante :
   </para>
   <programlisting>
<![CDATA[

$ sudo emerge -va dev-php5/mongo

]]>
   </programlisting>
   
   <para>
    Si vous utilisez PECL, vous recevrez une erreur signalant que libtool
    n'est pas à la bonne version. Lors de la compilation depuis les sources,
    vous devriez avoir besoin d'exécuter aclocal et autoconf.
   </para>
   <programlisting>
<![CDATA[

$ phpize && aclocal && autoconf && ./configure && make && make install

]]>
   </programlisting>
  </section>
  
  <section xml:id="mongo.installation.fedora">
   <title>Red Hat</title>
   <para>
    Ceci inclut Fedora et CentOS.
   </para>
   <para>
    La configuration par défaut d'Apache sur ces systèmes
    ne permet pas aux requêtes d'effectuer des connexions réseaux,
    ceci signifie que le driver recevra une erreur "Permission denied"
    lorsqu'il tentera une connexion à la base de données. Si vous
    rencontrez une telle erreur, tentez d'exécuter ceci :
    <programlisting>
<![CDATA[
$ /usr/sbin/setsebool -P httpd_can_network_connect 1 
]]>
    </programlisting>
    Puis, redémarrez Apache (Ce comportement peut également survenir
    sous SELinux).
   </para>
  </section>
 </section>
 
 <section xml:id="mongo.installation.windows">
  <title>Installation sous Windows</title>
  
  <para>
   Les binaires précompilés pour chaque version sont disponibles sur
   <link xlink:href="&url.mongodb.github.downloads;">Github</link> pour une
   grande variété de combinaison de versions, de sécurité de threads, et de
   bibliothèques VC. Décompressez l'archive et placez php_mongo.dll dans votre
   dossier d'extension PHP ("ext" par défaut).
  </para>
  
  <para>
   Le code le plus récent (non publié) est compilé avec les binaires Windows à
   chaque modification. L'archive Zip contient les fichiers php_mongo.dll et
   version.txt. Conservez le fichier version.txt ; ainsi, si vous avez une question
   ou un problème, vous pourrez indiquer aux développeurs l'exacte version que vous
   utilisez. (Le nombre est assez long et absurde, mais il a du sens pour les
   développeurs ;) )
  </para>
  <para>
   Pour récupérer les dernière corrections de bogues, téléchargez le binaire
   correspondant à la version de PHP que vous avez d'installée :
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc652;">
      PHP 5.2 VC6 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6ts52;">
      PHP 5.2 VC6 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6;">
      PHP 5.3 VC6 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6ts;">
      PHP 5.3 VC6 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc8;">
      PHP 5.3 VC8 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc8ts;">
      PHP 5.3 VC8 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc9;">
      PHP 5.3 VC9 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc9ts;">
      PHP 5.3 VC9 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
  </itemizedlist>
  
  <para>
   Ajoutez la ligne suivante à votre fichier php.ini :
   <programlisting>
<![CDATA[
extension=php_mongo.dll
]]>
   </programlisting>
  </para>
 </section>
 
 <section xml:id="mongo.installation.thirdparty">
  <title>Instructions d'installation tierces</title>
  
  <para>
   Beaucoup de personnes ont créés d'excellents tutoriels sur l'installation
   du driver PHP.
  </para>
  
  <itemizedlist>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.video;">
      PHP 5.3.1 avec Xdebug, MongoDB et Lithium sous Ubuntu 9.10 / Apache 2.2
     </link>
    </para>
    <para>
     Une excellent vidéo qui vous explique l'installation étape par étape
     d'Apache, PHP, Xdebug, MongoDB, et Lithium par Jon Adams.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.ubuntu.9.04;">
      Installation de MongoDB et du driver PHP sous Ubuntu 9.04
     </link>
    </para>
    <para>
     Article espagnol par Javier Aranda (<link xlink:href="&url.mongodb.ubuntu.9.04.en;">
     traduction anglaise</link>).
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.osx;">
      OS X: Installation de MongoDB et du driver PHP Mongo
     </link>
    </para>
    <para>
     Par Matt Butcher.
    </para>
   </listitem>
  </itemizedlist>
 </section>
 
</section>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
