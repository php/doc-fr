<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.10 $ -->
<!-- EN-Revision: 1.5 Maintainer: didou Status: ready -->
  <refentry id="function.shmop-open">
   <refnamediv>
    <refname>shmop_open</refname>
    <refpurpose>
      Crée ou ouvre un bloc de mémoire partagée
    </refpurpose>
   </refnamediv>
   <refsect1>
    &reftitle.description;
     <methodsynopsis>
      <type>int</type><methodname>shmop_open</methodname>
      <methodparam><type>int</type><parameter>key</parameter></methodparam>
      <methodparam><type>string</type><parameter>flags</parameter></methodparam>
      <methodparam><type>int</type><parameter>mode</parameter></methodparam>
      <methodparam><type>int</type><parameter>size</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>shmop_open</function> peut créer ou ouvrir un bloc
     de mémoire partagée.
    </para>
    <para>
     <function>shmop_open</function> prend 4 paramètres: la
     clé, qui sera l'identifiant système pour le bloc.
     Ce paramètre peut être passé comme
     un décimal ou un hexadécimal. Le
     deuxième paramètre est un groupe d'options :
     <itemizedlist>
      <listitem>
       <simpara>
        "a" pour accès (utilise <literal>SHM_RDONLY</literal> pour shmat)
        utilisez cette option pour ouvrir un bloc déjà existant en lecture
        seule.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "c" pour création (utilise <literal>IPC_CREATE</literal>)
        utilisez cette option pour créer un nouveau bloc, ou, si un
        segment avec le même identifiant existe, essayer d'y accéder en
        lecture et écriture.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "w" pour accès en lecture et écriture. Utilisez 
        cette option lorsque vous devez accéder en lecture et 
        écriture à un segment de mémoire partagée. 
        C'est le cas le plus courant.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "n" crée un nouveau segment de mémoire partagée
        (utilise <literal>IPC_CREATE|IPC_EXCL</literal>). Utilisez cette option
        lorsque vous voulez créer un nouveau segment de mémoire
        partagée sauf s'il en existe déjà un corrompu avec la 
        même option. Ceci est très pratique pour des raisons
        de sécurité, pour éviter des trous de sécurité
        qui exploiteraient la course aux ressources. 
       </simpara>
      </listitem>
     </itemizedlist>
     Le troisième paramètre est le mode, c'est à
     dire les permissions que vous donnez à ce bloc. Ce sont
     les mêmes que pour les fichiers. Ces permissions doivent
     être passées sous forme d'octal (i.e.  0644).
     Le dernier paramètre est la taille du bloc de mémoire,
     en octets.
     <note>
      <simpara>
        Les troisième et quatrième paramètres doivent être passés à 0 si vous
        voulez ouvrir un bloc de mémoire partagée déjà existant.
        En cas de succès <function>shmop_open</function> retourne un
        identifiant que vous pouvez utiliser pour accéder à
        la mémoire que vous venez de créer.
     </simpara></note>
    </para>
    <para>
     <example>
      <title>Créer un nouveau bloc de mémoire partagée Shmop</title>
      <programlisting role="php">
<![CDATA[
<?php
$shm_key = ftok(__FILE__, 't');
$shm_id = shmop_open($shm_key, "c", 0644, 100);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Cet exemple ouvre un nouveau bloc de mémoire partagée,
     dont l'identifiant est retourné par <function>ftok</function>.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
