<?xml version='1.0' encoding='iso-8859-1'?>
<!-- $Revision: 1.7 $ -->
<!-- EN-Revision: 1.7 Maintainer: yannick Status: ready -->
  <refentry id="function.PDO-prepare">
   <refnamediv>
    <refname>PDO::prepare</refname>
    <refpurpose>
     Prépare une requête à l'exécution et retourne un objet
    </refpurpose>
   </refnamediv>
   <refsect1 role="description">
    &reftitle.description;
    <methodsynopsis>
     <type>PDOStatement</type><methodname>PDO::prepare</methodname>
     <methodparam><type>string</type><parameter>statement</parameter></methodparam>
     <methodparam choice="opt"><type>array</type><parameter>driver_options</parameter></methodparam>
    </methodsynopsis>

    &warn.experimental.func;
    <para>
     Prépare une requête SQL à être exécutée par la méthode 
     <function>PDOStatement::execute</function>. La requête SQL peut contenir
     zéro ou plusieurs noms (:name) ou marqueurs (?) pour lesquels les valeurs
     réelles seront substituées lorsque la requête sera exécutée.
     Vous ne pouvez pas utiliser les marqueurs nommés et les marqueurs interrogatifs
     dans une même requête SQL ; choisissez l'un ou l'autre.
    </para>
    <para>
     Appeler <function>PDO::prepare</function> et
     <function>PDOStatement::execute</function> pour les requêtes
     qui doivent être exécutées plusieurs fois avec différentes valeurs de
     paramètres optimisent les performances de votre application en autorisant
     le driver à négocier coté client et/ou serveur avec le cache des requêtes
     et les méta-informations, et aident à prévenir les attaques par injection
     SQL en éliminant le besoin de protéger les paramètres manuellement.
    </para>
    <para>
     PDO émulera les requêtes préparées / les paramètres liés pour les drivers
     qui ne le supportent pas nativement, et peut également réécrire les
     paramètres nommés ou les marqueurs en quelques choses de plus
     approprié, si le driver supporte un style mais pas l'autre.
    </para>
   </refsect1>
   <refsect1 role="parameters">
    &reftitle.parameters;
    <para>
     <variablelist>
      <varlistentry>
       <term><parameter>statement</parameter></term>
       <listitem>
        <para>
         Doit être une requête SQL valide pour le serveur de base de données cible.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>driver_options</parameter></term>
       <listitem>
        <para>
         Ce tableau contient une ou plusieurs paires clé=&gt;valeur pour définir
         les valeurs des attributs pour l'objet PDOStatement que cette méthode
         retourne. Vous pouvez utiliser ceci pour définir la valeur
         <literal>PDO_ATTR_CURSOR</literal> à
         <literal>PDO_CURSOR_SCROLL</literal> pour demander un curseur scrollable.
         Quelques drivers ont des options spécifiques qui peuvent être définies
         au moment de la préparation.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
   </refsect1>

   <refsect1 role="returnvalues">
    &reftitle.returnvalues;
    <para>
     Si le serveur de base de données prépare avec succès cette requête,
     <function>PDO::prepare</function> retourne un objet PDOStatement.
    </para>
   </refsect1>

   <refsect1 role="examples">
    &reftitle.examples;
    <para>
     <example>
      <title>Prépare une requête SQL avec des paramètres nommés</title>
      <programlisting role='php'>
<![CDATA[
<?php
/* Exécute une requête préparée en passant un tableau de valeurs */
$sql = 'SELECT nom, couleur, calories
    FROM fruit
WHERE calories < :calories AND couleur = :couleur';
$sth = $dbh->prepare($sql, array(PDO_ATTR_CURSOR, PDO_CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':couleur' => 'rouge'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':couleur' => 'jaune'));
$yellow = $sth->fetchAll();
?>
]]>
      </programlisting>
     </example>
     <example>
      <title>Prépare une requête SQL avec des marqueurs</title>
      <programlisting role='php'>
<![CDATA[
<?php
/* Exécute une requête préparée en passant un tableau de valeurs */
$sth = $dbh->prepare('SELECT nom, couleur, calories
    FROM fruit
    WHERE calories < ? AND couleur = ?');
$sth->execute(array(150, 'rouge'));
$red = $sth->fetchAll();
$sth->execute(array(175, 'jaune'));
$yellow = $sth->fetchAll();
?>
]]>
      </programlisting>
     </example>
    </para>
   </refsect1>

   <refsect1 role="seealso">
    &reftitle.seealso;
    <para>
     <simplelist>
      <member><function>PDO::exec</function></member>
      <member><function>PDO::query</function></member>
      <member><function>PDOStatement::execute</function></member>
     </simplelist>
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
