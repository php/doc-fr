<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.21 $ -->
<!-- EN-Revision: 1.17 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes -->

<chapter xml:id="install.pecl" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Installation d'extensions PECL</title>

 <sect1 xml:id="install.pecl.intro">
  <title>Introduction aux installations PECL</title>
  <simpara>
   <link xlink:href="&url.pecl;">PECL</link> est un dépôt d'extensions PHP
   qui vous sont disponibles via le système de paquet
   <link xlink:href="&url.php.pear;">PEAR</link>. Cette section du manuel
   vous guide dans l'obtention et l'installation d'extensions PECL.
  </simpara>
  <simpara>
   Ces instructions supposent que <literal>/your/phpsrcdir/</literal> est le
   chemin jusqu'aux sources de la distribution PHP, et <literal>extname</literal> est le nom
   de votre extension PECL : adaptez les commandes qui suivent à votre situation.
   Ces instructions supposent aussi que vous êtes familier avec l'utilisation
   des <link xlink:href="&url.php.pear.cli;">commandes pear</link>.
   Les informations dans le manuel PEAR pour la commande <literal>pear</literal>
   sont également applicables à la commande <literal>pecl</literal>.
  </simpara>
  <simpara>
   Pour être utilisée, une extension partagée doit être compilée, installée
   et chargée. Les méthodes décrites ci-dessous vous fournissent diverses
   instructions sur la façon de compiler et d'installer des extensions mais
   ne les chargent pas automatiquement. Les extensions peuvent être chargées
   en ajoutant une directive d'<link linkend="ini.extension">extension</link>
   au fichier &php.ini; ou à l'aide de la fonction <function>dl</function>.
  </simpara>
  <simpara>
   Lorsque vous compilez des modules PHP, il est important d'avoir les
   outils dans leurs versions appropriées, tels que autoconf, automake, libtool, etc. Voyez les
   <link xlink:href="&url.php.anoncvs;">Instructions pour le CVS anonyme</link>, afin
   de connaître les utilitaires nécessaires, et leurs versions.
  </simpara>
 </sect1>

 <sect1 xml:id="install.pecl.downloads">
  <title>Télécharger des extensions PECL</title>
  <simpara>
   Il existe plusieurs méthodes pour télécharger des extensions PECL :
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link xlink:href="&url.pecl;">&url.pecl;</link>
    </simpara>
    <simpara>
     Le site web de PECL contient diverses informations sur les différentes extensions
     offertes par l'équipe de développement de PHP. Vous pourrez consulter les modifications
     entre les versions, les notes de versions, ce qui est requit pour faire fonctionner l'extension
     ainsi que d'autres détails similaires.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>pecl download extname</literal>
    </simpara>
    <simpara>
     Les extensions PECL listées sur le site web de PECL sont disponibles
     et peuvent être téléchargées et installées en utilisant la
     <link xlink:href="&url.php.pear.cli;">commande pecl</link>.
     La version spécifique de l'extension peut également être spécifiée.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <acronym>CVS</acronym>
    </simpara>
    <simpara>
     La plupart des fichiers PECL sont conservés dans le serveur <acronym>CVS</acronym>.
     Une interface Web est disponible à <link xlink:href="&url.php.cvs;pecl/">&url.php.cvs;pecl/</link>.
     Pour télécharger directement depuis <acronym>CVS</acronym>, suivez la séquence d'instructions
     ci-dessous. Notez que <emphasis>phpfi</emphasis> est le mot de passe de l'utilisateur
     <emphasis>cvsread</emphasis> :
    </simpara>
    <para>
     <screen>
$ cvs -d:pserver:cvsread@cvs.php.net:/repository login
$ cvs -d:pserver:cvsread@cvs.php.net:/repository co pecl/extname
     </screen>
    </para>
   </listitem>
   <listitem>
    <simpara>
     Téléchargements pour Windows
    </simpara>
    <simpara>
     Les utilisateurs de Windows peuvent trouver les bibliothèques compilées PECL
     dans la <emphasis>Collection of PECL modules</emphasis> disponible sur la
     page <link xlink:href="&url.php.downloads;">téléchargements PHP</link>, ou en récupérant
     un <link xlink:href="&url.php.snapshots;">Snapshot PECL</link>, ou en récupérant la
     bibliothèque DDL sur <link xlink:href="&url.pecl.win;">PECL4WIN</link>. Pour compiler
     PHP sous Windows, lisez le <link linkend="install.windows.building">chapitre approprié</link>.
    </simpara>
   </listitem>
  </itemizedlist>
 </sect1>

 <sect1 xml:id="install.pecl.windows">
  <title>PECL sur Windows</title>
  <simpara>
   Comme pour toute extension PHP <acronym>DLL</acronym>,
   l'installation est aussi simple que de copier la bibliothèque DDL de l'extension PECL dans
   le dossier <link linkend="ini.extension-dir">extension_dir</link> et de la charger
   dans le &php.ini;. Par exemple, ajoutez la ligne suivante dans votre &php.ini; :
  </simpara>
  <para>
   <screen>
extension=php_extname.dll
   </screen>
  </para>
  <simpara>
   Après cela, relancez le service Web.
  </simpara>
 </sect1>

 <sect1 xml:id="install.pecl.pear">
  <title>Compilation d'extensions PECL partagées avec la commande pecl</title>
  <simpara>
   PECL facilite la création d'extension PHP partagées. En utilisant la
   <link xlink:href="&url.php.pear.cli;">commande pecl</link>, faites ceci :
  </simpara>
  <para>
   <screen>
$ pecl install extname
   </screen>
  </para>
  <simpara>
   Ceci va télécharger le fichier source de l'extension <emphasis>extname</emphasis>,
   le compiler et installer le fichier <filename>extname.so</filename> dans votre
   dossier <link linkend="ini.extension-dir">extension_dir</link>.
   <filename>extname.so</filename> doit ensuite être chargé via &php.ini;.
  </simpara>
  <simpara>
   Par défaut, la commande <literal>pecl</literal> n'installera pas les paquets
   marqués comme étant <literal>alpha</literal> ou
   <literal>beta</literal>. Si aucun paquet <literal>stable</literal> est disponible,
   vous devriez installer un paquet <literal>beta</literal> en utilisant la commande suivante :
  </simpara>
  <para>
   <screen>
$ pecl install extname-beta
   </screen>
  </para>
  <para>
   Vous pouvez également installer une version spécifique en utilisant la commande :
  </para>
  <para>
   <screen>
$ pecl install extname-0.1
   </screen>
  </para>
  <note>
   <para>
    Après avoir activée cette extension dans le &php.ini;, relancez le service Web
    afin de la prendre en compte.
   </para>
  </note>
 </sect1>

 <sect1 xml:id="install.pecl.phpize">
  <title>Compilation des extensions partagées avec phpize</title>
  <simpara>
   Parfois, l'utilisation de l'installeur <literal>pecl</literal> n'est pas une bonne option.
   Ceci parce que vous être derrière un pare-feu ou parce que l'extension que vous voulez
   installer n'est pas disponible en tant que paquet PECL comme une extension
   uniquement disponible via CVS. Si vous devez compiler une telle extension,
   vous pouvez utiliser l'utilitaire de compilation afin d'exécuter la compilation
   manuellement.
  </simpara>
  <simpara>
   La commande <literal>phpize</literal> est utilisée pour préparer
   l'environnement de compilation pour une extension PHP. Dans l'exemple suivant, les
   sources de l'extension sont dans un dossier appelé <filename>extname</filename> :
  </simpara>
  <para>
   <screen>
<![CDATA[
$ cd extname
$ phpize
$ ./configure
$ make
# make install
]]>
   </screen>
  </para>
  <simpara>
   Une installation réussie aura créé un fichier <filename>extname.so</filename>
   et l'aura placé dans le <link linkend="ini.extension-dir">dossier des extensions</link>
   de PHP. Vous devez ajouter la ligne <literal>extension=extname.so</literal>
   dans votre &php.ini; avant de pouvoir utiliser l'extension.
  </simpara>
  <simpara>
   Si le système ne possède pas la commande <literal>phpize</literal> et que
   vous utilisez des paquets précompilés (comme des RPM), assurez-vous d'installer
   également la version de développement appropriée des paquets PHP car
   elle inclut également la commande <literal>phpize</literal> ainsi que les en-têtes
   appropriés pour construire PHP et ses extensions.
  </simpara>
  <simpara>
   Exécutez la commande <literal>phpize --help</literal> pour afficher des informations
   d'utilisation supplémentaires.
  </simpara>
 </sect1>

 <sect1 xml:id="install.pecl.static">
  <title>Compilation des extensions PECL statiquement dans PHP</title>
  <simpara>
   Il peut arriver que vous ayez à compiler votre extension PECL
   statiquement dans votre binaire PHP. Pour ce faire, vous devez placer
   les sources de l'extension dans le dossier <filename>php-src/ext/</filename>
   et exécuter à nouveau le script de configuration de PHP.
  </simpara>
  <para>
   <screen>
<![CDATA[
$ cd /your/phpsrcdir/ext
$ pecl download extname
$ gzip -d < extname.tgz | tar -xvf -
$ mv extname-x.x.x extname
$ rm package.xml
]]>
   </screen>
  </para>
  <simpara>
   Cela générera le dossier suivant :
  </simpara>
  <para>
   <screen>
    /your/phpsrcdir/ext/extname
   </screen>
  </para>
  <simpara>
   À partir de la, forcez PHP à reconstruire le script de configuration, puis, suivez le processus
   classique de compilation de PHP :
  </simpara>
  <para>
   <screen>
$ cd /your/phpsrcdir
$ rm configure
$ ./buildconf --force
$ ./configure --help
$ ./configure --with-extname --enable-someotherext --with-foobar
$ make
$ make install
   </screen>
  </para>
  <note>
   <simpara>
    Pour exécuter le script 'buildconf', vous devez posséder autoconf 2.13 et
    automake 1.4+ (les versions plus récentes de autoconf peuvent fonctionner,
    mais ne sont pas supportées).
   </simpara>
  </note>
  <simpara>
   L'utilisation de <literal>--enable-extname</literal> ou
   <literal>--with-extname</literal> dépend de l'extension. Généralement,
   une extension qui ne dépend pas d'une bibliothèque externe utilise
   <literal>--enable</literal>. Pour être certain, utilisez la commande
   suivante après avoir utilisé buildconf :
  </simpara>
  <para>
   <screen>
$ ./configure --help | grep extname
   </screen>
  </para>
 </sect1>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->