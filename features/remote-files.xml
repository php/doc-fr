<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.9 $ -->
 <chapter id="features.remote-files">
  <title>Utilisation des fichiers &agrave; distance</title>
  <para>
   Aussi longtemps que le support des gestionnaires d'URL ("URL fopen wrapper")
   sont activ&eacute;s dans le &php.ini;, vous pouvez utiliser des URLs
   (HTTP et FTP) avec la majorit&eacute; des fonctions qui utilisent un
   nom de fichier comme param&egrave;tre. Cela inclut notamment
   <function>include</function>, <function>include_once</function>, 
   <function>require</function> et <function>require_once</function>.
   Reportez-vous &agrave; <xref linkend="wrappers"/> pour plus d'informations
   sur les protocoles support&eacute;s par &php;.
  </para>
  <note>
   <para>
    En PHP 4.0.3 et plus r&eacute;cent, pour pouvoir utiliser les gestionnaires
    d'URL, vous devez configurer &php; avec l'option
    <option>--enable-url-fopen-wrapper</option>.
   </para>
  </note>
 <para>
   <note>
    <para>
     Les versions de &php; pour Windows plus anciennes que 4.3
     de supportait pas les gestionnaires d'URL avec les fonctions suivantes : 
     <function>include</function>, <function>include_once</function>,
     <function>require</function>, <function>require_once</function>,
     et les fonctions de cr&eacute;ation d'images de l'extension <xref linkend="ref.image"/>.
    </para>
   </note>
  </para>
  <para>
   Par exemple, vous pouvez suivre l'exemple suivant pour ouvrir un
   fichier sur un serveur web distant, analyser les r&eacute;sultats
   pour extraire les informations dont vous avez besoin, et ensuite
   l'utiliser dans une requ&ecirc;te de base de donn&eacute;es, ou
   simplement &eacute;diter les informations dans le style de votre site.
  </para>
  <para>
   <example>
    <title>Conna&icirc;tre le titre d'une page distante</title>
    <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("http://www.example.com/", "r");
if (!$file) {
    echo "<p>Impossible de lire la page.\n";
    exit;
}
while (!feof ($file)) {
    $line = fgets ($file, 1024);
    /* Cela ne fonctionne que si les balises Title sont correctement utilis&eacute;es */
    if (eregi ("<title>(.*)</title>", $line, $out)) {
        $title = $out[1];
        break;
    }
}
fclose($file);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>
   Vous pouvez aussi &eacute;crire des fichiers sur un serveur FTP
   aussi longtemps que vous &ecirc;tes connect&eacute; avec un
   utilisateur ayant les bons droits d'acc&egrave;s, alors que le
   fichier n'existait pas encore. 
  </para>
  <para>
   Pour vous connecter avec un
   utilisateur autre qu'anonyme, vous devez sp&eacute;cifier un
   nom d'utilisateur (et certainement le mot de passe) dans l'URL,
   comme par exemple 'ftp://user:password&#64;ftp.example.com/path/to/file'.
   (Vous pouvez utiliser le m&ecirc;me type de syntaxe pour acc&eacute;der
   aux fichiers via <acronym>HTTP</acronym> lorsqu'ils n&eacute;cessitent une
   authentification basique).
  </para>
  <para>
   <example>
    <title>Stocker des donn&eacute;es sur un serveur distant</title>
    <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("ftp://ftp.example.com/incoming/outputfile", "w");
if (!$file) {
    echo "<p>Unable to open remote file for writing.\n";
    exit;
}
  /* Ecriture des donn&eacute;es. */
fputs ($file, $_SERVER['HTTP_USER_AGENT'] . "\n");
fclose ($file);
?>
]]>
    </programlisting>
   </example>
  <note>
   <para>
    Remarque: Vous pouvez avoir l'id&eacute;e,&agrave; partir de
    l'exemple ci-dessus, d'utiliser la m&ecirc;me technique pour
    &eacute;crire sur un log distant, mais comme mentionn&eacute; ci-dessus
    vous ne pouvez qu'&eacute;crire sur un nouveau fichier en utilisant
    les fonctions <function>fopen</function> avec une URL. Pour faire des log
    distribu&eacute;s, nous vous conseillons de regarder la partie
    <function>syslog</function>.
   </para>
  </note>
 </para>
 </chapter>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
